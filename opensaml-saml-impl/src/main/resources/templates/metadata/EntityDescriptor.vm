<md:EntityDescriptor#if (!$params.omitNamespaceDeclarations)#foreach ($ns in $namespaces.entrySet()) xmlns:$ns.key="$ns.value"#end#end entityID="$params.entityID">
#if ($params.requiresExtensions)

    <md:Extensions>
#if ($params.displayName || $params.description || $params.logo)
        <mdui:UIInfo>
#if ($params.displayName)
            <mdui:DisplayName>$params.displayName</mdui:DisplayName>
#end
#if ($params.description)
            <mdui:Description>$params.description</mdui:Description>
#end
#if ($params.logo)
            <mdui:Logo#if ($params.lang) xml:lang="$params.lang"#end#if ($params.logo.width) width="$params.logo.width"#end#if ($params.logo.height) height="$params.logo.height"#end>$params.logo.URI</mdui:Logo>
#end
#end
        </mdui:UIInfo>
    </md:Extensions>
#end
#if ($params.IDPSSODescriptor)
#parse("$params.templatePath/IDPSSODescriptor.vm")

#end
#if ($params.AttributeAuthorityDescriptor)
#parse("$params.templatePath/AttributeAuthorityDescriptor.vm")

#end
#if ($params.SPSSODescriptor)
#parse("$params.templatePath/SPSSODescriptor.vm")

#end
#if ($params.organizationName || $params.organizationURL)
    <md:Organization>
#if ($params.organizationName)
        <md:OrganizationName#if ($params.lang) xml:lang="$params.lang"#end>$params.organizationName</md:OrganizationName>
        <md:OrganizationDisplayName#if ($params.lang) xml:lang="$params.lang"#end>$params.organizationName</md:OrganizationDisplayName>
#end
#if ($params.organizationURL)
        <md:OrganizationURL#if ($params.lang) xml:lang="$params.lang"#end>$params.organizationURL</md:OrganizationURL>
#end
    </md:Organization>
#end
#foreach ($contact in $params.contactPersons)
    <md:ContactPerson contactType="$contact.type">
#if ($contact.company)
        <md:Company>$contact.company.value</md:Company>
#end
#if ($contact.givenName)
        <md:GivenName>$contact.givenName.value</md:GivenName>
#end
#if ($contact.surName)
        <md:SurName>$contact.surName.value</md:SurName>
#end
#foreach ($mail in $contact.emailAddresses)
        <md:EmailAddress>$mail.URI</md:EmailAddress>
#end
#foreach ($phone in $contact.telephoneNumbers)
        <md:TelephoneNumber>$phone.value</md:TelephoneNumber>
#end
    </md:ContactPerson>
#end
</md:EntityDescriptor>
